JVM-
为什么要了解虚拟机.
Sun/Oracle (三款代表)
Sun Classic/Exact VM          HostSpot VM          Mobile系列
  第一款商用Java虚拟机          目前使用最广泛的            

电信系统的服务器 IBM J9 VM使用比较多 WebSphare服务器.

rabbitMQ 也是基于虚拟机编写的,语言 erlang

未来的Java技术
模块化 混合语言 多核并行 丰富语法 64位 更强的垃圾回收

运行时数据区域
       方法区                虚拟机栈         本地方法栈
        
       堆                   程序计数器
       
       执行引擎              本地库接口        本地方法库

定义:
Java虚拟机在执行Java程序的过程中会把它所管理的内存划分为若干个不同的数据区域

类型:
程序计数器,虚拟机栈,本地方法栈,Java堆,方法区(运行时常量池),直接内存

程序计数器：较小的内存空间，当前线程执行的字节码的行号指示器；各线程之间独立存储，互不影响；

java栈：线程私有，生命周期和线程，每个方法在执行的同时都会创建一个栈帧用于存储局部变量表，操作
数栈，动态链接，方法出口等信息。方法的执行就对应着栈帧在虚拟机栈中入栈和出栈的过程；栈里面存放着各种基本数据类型和对象的引用（-Xss） ；

本地方法栈：本地方法栈保存的是native方法的信息,当一个JVM创建的线程调用native方法后，JVM不再为
其在虚拟机栈中创建栈帧，JVM只是简单地动态链接并直接调用native方法；

native 修饰的方法是本地方法

-Xss 虚拟机栈

堆：Java堆是Javaer需要重点关注的一块区域，因为涉及到内存的分配
(new关键字，反射等)与回收(回收算法，收集器等) 
（-Xms；堆的最小值    -Xmx；堆的最大值   -Xmn；堆的新生代的大小   -XX:NewSize； 新生代的最小值   -XX:MaxNewSize 新生代的最大值） ；

方法区：也叫永久区，用于存储已经被虚拟机加载的类信息，常量("zdy","123"等)，静态变量(static变量)等数据
（   -XX:PermSize； - XX:MaxPermSize； jdk1.7及1.7之前
    -XX:MetaspaceSize； - XX:MaxMetaspaceSize   jdk1.8及之后） 。

运行时常量池：运行时常量池是方法区的一部分，用于存放编译期生成的各种字面量("zdy","123"等)和符号引用。


### jvm的内存模型的不同. 1.6 1.7 1.8 三个版本不同. 

直接内存大小: MaxDirectMemorySize  200M-300M 

##深入辨析堆和栈
功能
Ø 以栈帧的方式存储方法调用的过程，并存储方法调用过程中基本数据类型的变量（int、short、long、byte、
float、double、boolean、char等）以及对象的引用变量，其内存分配在栈上，变量出了作用域就会自动释放；
Ø 而堆内存用来存储Java中的对象。无论是成员变量，局部变量，还是类变量，它们指向的对象都存储在堆内存
中；
n 线程独享还是共享
Ø 栈内存归属于单个线程，每个线程都会有一个栈内存，其存储的变量只能在其所属线程中可见，即栈内存可以
理解成线程的私有内存。
Ø 堆内存中的对象对所有线程可见。堆内存中的对象可以被所有线程访问。
n 空间大小
Ø 栈的内存要远远小于堆内存，栈的深度是有限制的，可能发生StackOverFlowError问题。

