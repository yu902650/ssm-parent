###方法的出入栈
方法会打包成栈帧,一个栈帧至少要包含局部变量表,操作数栈和帧数据区

栈上分配

###虚拟机的对象


####堆参数设置,对性能的影响和内存溢出实战
1.Java堆溢出
2.新生代配置
3.方法区和运行时常量池溢出
4.虚拟机栈和本地方法栈溢出
5.本机直接内存溢出


垃圾回收器和内存分配策略
1.面试
2.GC对应用的性能有影响的
3.写代码有好处


一.GC要做的事情
1.where/which?
2.when?
3.how?

二.为什么要去了解GC和内存分配?


三.谁需要GC?
堆和方法区, 永久带,共享的那些,跟着线程和方法同生共死的部分


###To be or not to be --判断对象的存活 **GC Roots**
引用计数算法
可达性分析
在Java中,可作为GC Roots的对象包括:
1.方法区:类静态属性引用的对象;
2.方法区:常量引用的对象;
3.虚拟机栈(本地变量表)中引用的对象.
4.本地方法栈JNI(Native方法)中引用的对象

-----------------------------------
对象A  ---> 对象B
对象C  ---> 对象B

对象B  0  //1+1 =0;
**没人用的对象就可以不用,回收.
-----------------------------------

对象A  ---> 对象B
对象B  ---> 对象A

对象A. B   1
**相互引用的时候,AB会永远放在内存中,不会被回收
-----------------------------------
  
###Java中的各种引用.
强引用
Object obj = new Object();

软引用 SoftReference
一些有用但是并非必需,用软引用关联,系统将要OOM之前,这些对象会被回收   SoftReference类

弱引用 WeakReference
一些有用(程度比软引用更低)但是并非必需,用弱引用关联的对象,只能生存到下一次垃圾回收之前.GC发生时,
不管内存够不够都会被回收.

虚引用 PhantomReference
幽灵引用,最弱的引用,被垃圾回收的时候收到一个通知

###软引用 SoftReference 和 弱引用 WeakReference,用在内存资源紧张的情况下.


###垃圾回收算法
标记-清除算法(Mark-Sweep) 标记后,清楚未标记的,会产生碎片并且速度比较慢
复制算法(Copying)        浪费内存 复制算法在对象存活率高的时候要进行较多的复制操作，效率将会降低，
标记-整理算法(Mark-Compact) 

GC算法有哪几种,机制是什么样的?
(1)标记-清除
(2)复制
(3)标记-整理
(4)分代收集
分代收集.90%的对象是朝生夕死.不到10%

Eden(新生代) / Survivor (标记-清除算法  + 标记-整理算法)  
新生代使用的复制算法,好处真正复制的对象不多(10%).

Eden A-->B
Eden B-->A

新生代的回收, Minor gc 复制算法
老年代的回收  Full gc  标记-清除/整理算法

垃圾收集器
1.Serial收集器(串行收集器) Stop-The-World
单线程的收集器,Stop-The-World方法,将用户正常工作的线程全部暂停掉,直到他收集结束.回收效率高
2.ParNew收集器(多线程进行GC) Stop-The-World
它需要和CMS收集器配合工作
3.CMS收集器(老年代收集器) 
一种以获取最短回收停顿时间为目标的收集器.适合应用在B/S系统的服务器上,这类应用尤其中是服务器的响应速度
4.G1收集器： Stop-The-World
　　是当今收集器发展的最前言成果之一，知道jdk1.7，sun公司才认为它达到了足够成熟的商用程度。

优点：

　　它最大的优点是结合了空间整合，不会产生大量的碎片，也降低了进行gc的频率。

　　二是可以让使用者明确指定指定停顿时间。（可以指定一个最小时间，超过这个时间，就不会进行回收了）

它有了这么高效率的原因之一就是：对垃圾回收进行了划分优先级的操作，这种有优先级的区域回收方式保证了它的高效率。

如果你的应用追求停顿，那G1现在已经可以作为一个可尝试的选择；如果你的应用追求吞吐量，那G1并不会为你带来什么特别的好处。

注：以上所有的收集器当中，当执行GC时，都会stop the world，但是下面的CMS收集器却不会这样。

5.ParNew Scanvenge收集器  Stop-The-World
类似ParNew，但更加关注吞吐量。目标是：达到一个可控制吞吐量的收集器。


类加载过程:
包括加载,链接(验证,准备,解析),初始化

